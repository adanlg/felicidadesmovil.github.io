<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Carlos Felicidades</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
  }
  #game-container {
    position: relative;
    width: 100vw;
    height: 100vh;
    background: linear-gradient(to bottom, #ff77a9, #ff9eb3);
  }
  #player {
    position: absolute;
    width: 50px;
    height: 80px;
    left: 50%;
    transform: translateX(-50%);
    bottom: 5%; /* Posicionado 5% más arriba */
    background-image: url('image1.png');
    background-size: contain;
    background-repeat: no-repeat;
  }
  .obstacle {
    position: absolute;
    width: 50px;
    height: 50px;
    background-image: url('image2.png');
    background-size: contain;
    background-repeat: no-repeat;
    transform-origin: center bottom;
  }
</style>
</head>
<body>
<div id="game-container">
  <div id="player"></div>
  <div id="score">Score: 0</div>
</div>
<script>
  const player = document.getElementById('player');
  const gameContainer = document.getElementById('game-container');
  const scoreElement = document.getElementById('score');

  const originalPlayerX = gameContainer.clientWidth / 2 - player.clientWidth / 2; // Posición original del jugador
  const playerSpeed = 5;
  let playerX = originalPlayerX;

  player.style.left = `${playerX}px`;

  let score = 0;
  let consecutiveAvoided = 0;

  document.addEventListener('keydown', (event) => {
    if (event.key === 'ArrowLeft') {
      playerX -= playerSpeed;
    } else if (event.key === 'ArrowRight') {
      playerX += playerSpeed;
    }
    
    if (playerX < 0) {
      playerX = 0;
    } else if (playerX > gameContainer.clientWidth - player.clientWidth) {
      playerX = gameContainer.clientWidth - player.clientWidth;
    }
    
    player.style.left = `${playerX}px`;
  });

  function resetGame() {
    playerX = originalPlayerX; // Reseteamos la posición del jugador
    player.style.left = `${playerX}px`;
    score = 0;
    consecutiveAvoided = 0;
    scoreElement.textContent = `Score: ${score}`;
    gameContainer.innerHTML = ''; // Eliminamos todos los obstáculos
    startGame(); // Llamamos a la función para comenzar el juego
  }

  function startGame() {
    setInterval(() => {
      const obstacle = document.createElement('div');
      obstacle.classList.add('obstacle');
      const randomX = Math.random() * (gameContainer.clientWidth - 20); // Nuevo tamaño del obstáculo
      obstacle.style.left = `${randomX}px`;
      gameContainer.appendChild(obstacle);

      const fallSpeed = 2;

      const fallInterval = setInterval(() => {
        const obstacleTop = obstacle.offsetTop + fallSpeed;
        obstacle.style.top = `${obstacleTop}px`;

        if (obstacleTop > gameContainer.clientHeight) {
          clearInterval(fallInterval);
          gameContainer.removeChild(obstacle);
        }

        if (
          obstacleTop + obstacle.clientHeight > gameContainer.clientHeight - player.clientHeight &&
          obstacleTop < gameContainer.clientHeight - player.clientHeight + player.clientHeight / 2 &&
          obstacle.offsetLeft + obstacle.clientWidth > playerX &&
          obstacle.offsetLeft < playerX + player.clientWidth
        ) {
          alert('Game Over: Has caído en la tentación, es normal, yo también lo haría');
          resetGame(); // Reiniciamos el juego después de "Game Over"
        }
      }, 16);

      score++;
      consecutiveAvoided = 0;
      scoreElement.textContent = `Score: ${score}`;

      if (score === 23) {
        alert('Felicidades, has conseguido respetar a Salma');
        resetGame(); // Reiniciamos el juego después de ganar
      }
    }, 1000);
  }

  startGame(); // Llamamos a la función para comenzar el juego

</script>
</body>
</html>
